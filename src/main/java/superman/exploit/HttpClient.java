package superman.exploit;

import java.io.IOException;
import org.apache.http.client.methods.CloseableHttpResponse;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.ByteArrayEntity;
import org.apache.http.impl.client.CloseableHttpClient;
import org.apache.http.impl.client.HttpClients;
import org.apache.http.util.EntityUtils;

public class HttpClient {

  public static void post(String url, byte[] toByteArray) throws IOException {
    CloseableHttpClient httpClient = HttpClients.createDefault();
    HttpPost httpPost = new HttpPost(url);
    httpPost.setEntity(new ByteArrayEntity(toByteArray));
    httpClient.execute(httpPost);
  }

  public static HttpResult get(String url) throws IOException {
    HttpResult httpResult = new HttpResult();
    CloseableHttpClient httpClient = HttpClients.createDefault();
    CloseableHttpResponse response = null;
    try {
      HttpGet httpGet = new HttpGet(url);
      response = httpClient.execute(httpGet);
      if (response.getStatusLine().getStatusCode() == 200) {
        String content = EntityUtils.toString(response.getEntity(), "UTF-8");
        httpResult.setData(content);
      }
    } catch (IOException e) {

    } finally {
      if (response != null) {
        response.close();
      }
      httpClient.close();
    }
    return httpResult;
  }
}
